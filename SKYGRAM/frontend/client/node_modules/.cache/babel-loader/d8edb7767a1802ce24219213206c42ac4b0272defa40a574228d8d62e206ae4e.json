{"ast":null,"code":"var _jsxFileName = \"/Users/jennirivera/Desktop/Development/code/phase-5/flygram/SKYGRAM/frontend/client/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport { useNavigate } from \"react-router-dom\";\nimport Login from './components/Login';\nimport HomePage from './components/HomePage';\nimport Signup from './components/Signup';\nimport CreatePost from './components/CreatePost';\nimport CrashPadPost from './components/CrashPadPost';\nimport Profile from \"./components/Profile\";\nimport axios from 'axios';\n// import PrivateRoute from './utils/PrivateRoute'\n// import { AuthProvider } from './context/AuthContext'\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\naxios.defaults.withCredentials = true;\nconst client = axios.create({\n  baseURL: \"http://127.0.0.1:8000\"\n});\nfunction App() {\n  _s();\n  const [currentUser, setCurrentUser] = useState();\n  const [registrationToggle, setRegistrationToggle] = useState(false);\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  // const [isAuthenticated, setisAuthenticated] = useState(false)\n  // const [posts, setPosts] = useState([])\n  // const navigate = useNavigate()\n\n  useEffect(() => {\n    client.get(\"user\").then(function (res) {\n      setCurrentUser(true);\n    }).catch(function (error) {\n      setCurrentUser(false);\n    });\n  }, []);\n  // useEffect(()=> {\n  //   console.log()\n  //   console.log(localStorage.getItem('token'))\n  //   fetch(\"auth/api/check-auth/\",{\n  //            headers: {\n  //              Authorization: `Bearer ${localStorage.getItem('token')}`,\n  //            },\n  //          }).then((res) => {\n  //     if (res.ok) {\n  //       console.log('res ok')\n  //         res.json().then((user) => setisAuthenticated(true));\n  //     }else{\n  //       console.log('res not ok')\n  //     }\n  // });\n  // },[])\n  // const checkUserAuthentication = async () => {\n  //   try {\n  //     const response = await axios.get('auth/api/check-auth/', {\n  //       headers: {\n  //         Authorization: `JWT ${localStorage.getItem('access_token')}`,\n  //       },\n  //     });\n\n  //     if (response.data.detail === 'Success') {\n  //       setisAuthenticated(true)\n  //       return true;\n  //     } else {\n  //       setisAuthenticated(false)\n  //       return false;\n  //     }\n  //   } catch (error) {\n\n  //     return false;\n  //   }\n  // };\n\n  //const isAuthenticated = checkUserAuthentication();\n  useEffect(() => {\n    fetch('feed').then(response => response.json()).then(posts => setPosts([...posts].sort().reverse()));\n  }, []);\n  const addNewPost = newPost => {\n    const formData = new FormData();\n    formData.append('caption', newPost.caption);\n    formData.append('image', newPost.image);\n    console.log(formData.get('caption'));\n    console.log(formData.get('image'));\n    fetch('http://127.0.0.1:8000/posts', {\n      method: \"POST\",\n      body: formData\n    }).then(response => response.json()).then(newData => setPosts([newData, ...posts])).then(navigate('/feed'));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [currentUser ? /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/feed\",\n        element: /*#__PURE__*/_jsxDEV(HomePage, {\n          posts: posts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 54\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 117\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 87\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/create\",\n        element: /*#__PURE__*/_jsxDEV(CreatePost, {\n          addNewPost: addNewPost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/crashpads\",\n        element: /*#__PURE__*/_jsxDEV(CrashPadPost, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/signup\",\n        element: /*#__PURE__*/_jsxDEV(Signup, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/profile\",\n        element: /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/feed\",\n        element: /*#__PURE__*/_jsxDEV(HomePage, {\n          posts: posts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"uII22a50TBxrggyDpWS9dsnnKhE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","BrowserRouter","Router","Route","Routes","useNavigate","Login","HomePage","Signup","CreatePost","CrashPadPost","Profile","axios","jsxDEV","_jsxDEV","defaults","xsrfCookieName","xsrfHeaderName","withCredentials","client","create","baseURL","App","_s","currentUser","setCurrentUser","registrationToggle","setRegistrationToggle","email","setEmail","username","setUsername","password","setPassword","get","then","res","catch","error","fetch","response","json","posts","setPosts","sort","reverse","addNewPost","newPost","formData","FormData","append","caption","image","console","log","method","body","newData","navigate","className","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jennirivera/Desktop/Development/code/phase-5/flygram/SKYGRAM/frontend/client/src/App.js"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom'\nimport {useNavigate} from \"react-router-dom\"\nimport Login from './components/Login';\nimport HomePage from './components/HomePage'\nimport Signup from './components/Signup'\nimport CreatePost from './components/CreatePost'\nimport CrashPadPost from './components/CrashPadPost'\nimport Profile from \"./components/Profile\"\nimport axios from 'axios';\n// import PrivateRoute from './utils/PrivateRoute'\n// import { AuthProvider } from './context/AuthContext'\n\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\naxios.defaults.withCredentials = true;\n\nconst client = axios.create({\n  baseURL: \"http://127.0.0.1:8000\"\n});\n\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState();\n  const [registrationToggle, setRegistrationToggle] = useState(false);\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  // const [isAuthenticated, setisAuthenticated] = useState(false)\n  // const [posts, setPosts] = useState([])\n  // const navigate = useNavigate()\n\n  useEffect(() => {\n    client.get(\"user\")\n    .then(function(res) {\n      setCurrentUser(true);\n    })\n    .catch(function(error) {\n      setCurrentUser(false);\n    });\n  }, []);\n  // useEffect(()=> {\n  //   console.log()\n  //   console.log(localStorage.getItem('token'))\n  //   fetch(\"auth/api/check-auth/\",{\n  //            headers: {\n  //              Authorization: `Bearer ${localStorage.getItem('token')}`,\n  //            },\n  //          }).then((res) => {\n  //     if (res.ok) {\n  //       console.log('res ok')\n  //         res.json().then((user) => setisAuthenticated(true));\n  //     }else{\n  //       console.log('res not ok')\n  //     }\n  // });\n  // },[])\n  // const checkUserAuthentication = async () => {\n  //   try {\n  //     const response = await axios.get('auth/api/check-auth/', {\n  //       headers: {\n  //         Authorization: `JWT ${localStorage.getItem('access_token')}`,\n  //       },\n  //     });\n  \n  //     if (response.data.detail === 'Success') {\n  //       setisAuthenticated(true)\n  //       return true;\n  //     } else {\n  //       setisAuthenticated(false)\n  //       return false;\n  //     }\n  //   } catch (error) {\n\n  //     return false;\n  //   }\n  // };\n\n  //const isAuthenticated = checkUserAuthentication();\n  useEffect(() => {\n    fetch('feed')\n    .then(response => response.json())\n    .then(posts => setPosts([...posts].sort().reverse()))\n}, [])\n\n  const addNewPost = (newPost) => {\n    const formData = new FormData();\n\n    formData.append('caption', newPost.caption);\n    formData.append('image', newPost.image);\n\n    console.log(formData.get('caption'))\n    console.log(formData.get('image'))\n\n\n    fetch('http://127.0.0.1:8000/posts', {\n        method: \"POST\",\n        body: formData\n    })\n    .then(response => response.json())\n    .then(newData => setPosts([newData, ...posts]))\n    .then(navigate('/feed'))\n  }\n  return (\n    <div className=\"app\">\n      <Routes>\n        {currentUser ? (<Route path=\"/feed\" element={<HomePage posts={posts}/>}/>) : (<Route path=\"/login\" element={<Login />}/>)}\n        <Route path=\"/create\" element={<CreatePost addNewPost={addNewPost} />}/>\n        <Route path=\"/crashpads\" element={<CrashPadPost/>}/>\n        <Route path=\"/signup\" element={<Signup />}/>\n        <Route path=\"/profile\" element={<Profile />}/>\n        <Route path=\"/feed\" element={<HomePage posts={posts} />}/>\n      </Routes>\n        \n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}